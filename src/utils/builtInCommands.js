// Built-in terminal commands with real data fetching capabilities
import figlet from "figlet";

// Manual ASCII art generator as fallback
const createManualASCII = (text) => {
  const asciiMap = {
    A: ["  ‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    B: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  "],
    C: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà      ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    D: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  "],
    E: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà   ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    F: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà   ", " ‚ñà‚ñà      ", " ‚ñà‚ñà      "],
    G: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà  ‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    H: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    I: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    J: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    K: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà  ‚ñà‚ñà  ", " ‚ñà‚ñà‚ñà‚ñà‚ñà   ", " ‚ñà‚ñà  ‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    L: [" ‚ñà‚ñà      ", " ‚ñà‚ñà      ", " ‚ñà‚ñà      ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    M: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà ", " ‚ñà‚ñà ‚ñà ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    N: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà  ‚ñà‚ñà ", " ‚ñà‚ñà ‚ñà ‚ñà‚ñà ", " ‚ñà‚ñà  ‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    O: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    P: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà      ", " ‚ñà‚ñà      "],
    Q: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà ‚ñà ‚ñà‚ñà ", " ‚ñà‚ñà  ‚ñà‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    R: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    S: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    T: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   "],
    U: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    V: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", "  ‚ñà‚ñà ‚ñà‚ñà  ", "   ‚ñà‚ñà‚ñà   "],
    W: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà ‚ñà ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà ‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    X: [" ‚ñà‚ñà   ‚ñà‚ñà ", "  ‚ñà‚ñà ‚ñà‚ñà  ", "   ‚ñà‚ñà‚ñà   ", "  ‚ñà‚ñà ‚ñà‚ñà  ", " ‚ñà‚ñà   ‚ñà‚ñà "],
    Y: [" ‚ñà‚ñà   ‚ñà‚ñà ", "  ‚ñà‚ñà ‚ñà‚ñà  ", "   ‚ñà‚ñà‚ñà   ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   "],
    Z: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "     ‚ñà‚ñà  ", "    ‚ñà‚ñà   ", "   ‚ñà‚ñà    ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    0: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    1: ["    ‚ñà‚ñà   ", "   ‚ñà‚ñà‚ñà   ", "    ‚ñà‚ñà   ", "    ‚ñà‚ñà   ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    2: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    3: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    4: [" ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", "      ‚ñà‚ñà "],
    5: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    6: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà      ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    7: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", "     ‚ñà‚ñà  ", "    ‚ñà‚ñà   ", "   ‚ñà‚ñà    "],
    8: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    9: [" ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", " ‚ñà‚ñà   ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà ", "      ‚ñà‚ñà ", " ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà "],
    " ": ["         ", "         ", "         ", "         ", "         "],
  };

  const lines = ["", "", "", "", ""];
  for (let char of text.toUpperCase()) {
    const ascii = asciiMap[char] || asciiMap[" "];
    for (let i = 0; i < 5; i++) {
      lines[i] += ascii[i];
    }
  }
  return lines.join("\n");
};

export const getBuiltInCommandOutput = async (
  command,
  username = "flame",
  hostname = "Nitro"
) => {
  try {
    // Handle figlet command with custom text
    if (command.startsWith("figlet")) {
      const parts = command.split(" ");
      const customText = parts.slice(1).join(" ").trim() || "TERMOZET";

      try {
        // Debug figlet availability
        console.log("Figlet object:", figlet);
        console.log("Figlet textSync function:", typeof figlet.textSync);

        // Use the real figlet package - try basic usage
        const asciiArt = figlet.textSync(customText);

        console.log("Figlet raw output:", JSON.stringify(asciiArt));
        console.log("Figlet ASCII art generated for:", customText);

        if (
          asciiArt &&
          asciiArt.trim() !== customText &&
          asciiArt.length > customText.length
        ) {
          return `${asciiArt}

Enhanced Terminal Portfolio
Built with React & Real-time Data
====================================`;
        } else {
          console.log("Figlet output seems to be plain text, falling back");
          throw new Error("Figlet did not apply ASCII styling");
        }
      } catch (error) {
        console.error("Figlet error:", error);
        // Use manual ASCII art generator as fallback
        const blockText = createManualASCII(customText);

        return `${blockText}

Enhanced Terminal Portfolio
Built with React & Real-time Data
====================================`;
      }
    }

    // Handle echo command with quoted text support
    if (command.startsWith("echo ")) {
      const echoText = command.substring(5); // Remove "echo "

      // Handle quoted strings
      if (
        (echoText.startsWith('"') && echoText.endsWith('"')) ||
        (echoText.startsWith("'") && echoText.endsWith("'"))
      ) {
        return echoText.slice(1, -1); // Remove quotes
      }

      // Handle environment variables
      if (echoText === "$USER") return username;
      if (echoText === "$HOME") return `/home/${username}`;
      if (echoText === "$PATH")
        return "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin";
      if (echoText === "$SHELL") return "/bin/bash";
      if (echoText === "$PWD") return `/home/${username}`;

      // Return the text as-is for other cases
      return echoText;
    }

    switch (command) {
      case "whoami": {
        return username;
      }

      case "date": {
        const now = new Date();
        const days = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ];
        const months = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ];

        return `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                        SYSTEM DATE & TIME                     ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìÖ Date Information:
‚îú‚îÄ Full Date: ${days[now.getDay()]}, ${
          months[now.getMonth()]
        } ${now.getDate()}, ${now.getFullYear()}
‚îú‚îÄ Short Date: ${now.toLocaleDateString()}
‚îú‚îÄ ISO Format: ${now.toISOString().split("T")[0]}
‚îî‚îÄ Day of Year: ${Math.ceil(
          (now - new Date(now.getFullYear(), 0, 1)) / (1000 * 60 * 60 * 24)
        )}

‚è∞ Time Information:
‚îú‚îÄ Current Time: ${now.toLocaleTimeString()}
‚îú‚îÄ 24h Format: ${now.toLocaleTimeString("en-GB")}
‚îú‚îÄ UTC Time: ${now.toUTCString().split(" ")[4]}
‚îî‚îÄ Timezone: ${Intl.DateTimeFormat().resolvedOptions().timeZone}

üåç World Clock:
‚îú‚îÄ New York: ${new Date().toLocaleTimeString("en-US", {
          timeZone: "America/New_York",
        })}
‚îú‚îÄ London: ${new Date().toLocaleTimeString("en-GB", {
          timeZone: "Europe/London",
        })}
‚îú‚îÄ Tokyo: ${new Date().toLocaleTimeString("ja-JP", { timeZone: "Asia/Tokyo" })}
‚îî‚îÄ Sydney: ${new Date().toLocaleTimeString("en-AU", {
          timeZone: "Australia/Sydney",
        })}`;
      }

      case "pwd": {
        // This will be handled by the calling component since it needs currentPath
        return null;
      }

      case "uptime": {
        // Calculate actual browser/app uptime
        const performanceUptime = Math.floor(performance.now() / 1000);
        const hours = Math.floor(performanceUptime / 3600);
        const minutes = Math.floor((performanceUptime % 3600) / 60);
        const seconds = Math.floor(performanceUptime % 60);
        const loadAvg1 = (Math.random() * 2).toFixed(2);
        const loadAvg5 = (Math.random() * 1.5).toFixed(2);
        const loadAvg15 = (Math.random() * 1).toFixed(2);

        // Format all values to exact column widths for perfect alignment
        const hoursStr = hours.toString().padStart(2, "0");
        const minutesStr = minutes.toString().padStart(2, "0");
        const secondsStr = seconds.toString().padStart(2, "0");

        // Format uptime display - ensure it fits in 39 characters (59 - 20 for labels)
        const uptimeDisplay = `${hoursStr}h ${minutesStr}m ${secondsStr}s`;
        const uptimeFormatted = uptimeDisplay.padEnd(39, " ");

        // Format load averages - ensure consistent spacing
        const loadAvg1Str = loadAvg1.padStart(4, " ");
        const loadAvg5Str = loadAvg5.padStart(4, " ");
        const loadAvg15Str = loadAvg15.padStart(4, " ");
        const loadDisplay = `${loadAvg1Str} (1m) | ${loadAvg5Str} (5m) | ${loadAvg15Str} (15m)`;
        const loadFormatted = loadDisplay.padEnd(39, " ");

        // Format performance metrics to exact widths
        const cpuUsage = Math.floor(Math.random() * 30 + 10)
          .toString()
          .padStart(2, " ");
        const memUsage = Math.floor(Math.random() * 40 + 30)
          .toString()
          .padStart(2, " ");
        const processes = Math.floor(Math.random() * 50 + 100)
          .toString()
          .padStart(3, " ");

        return `+=============================================================+
|                        SYSTEM UPTIME                        |
+=============================================================+

>> Current Time: ${new Date().toLocaleString()}
>> System Boot:  ${new Date(
          Date.now() - performanceUptime * 1000
        ).toLocaleString()}

+-----------------------------------------------------------+
|                    UPTIME BREAKDOWN                      |
+-----------------------------------------------------------+
| Total Uptime: ${uptimeFormatted}    |
| Active Users: 1 user                                     |
| Load Average: ${loadFormatted}    |
+-----------------------------------------------------------+

>> Performance Metrics:
   - CPU Usage: ~${cpuUsage}%
   - Memory Usage: ~${memUsage}%
   - Processes: ${processes} running`;
      }

      case "uname":
      case "uname -a": {
        // Get actual browser/OS info
        const userAgent = navigator.userAgent;
        const platform = navigator.platform;

        return `${platform} ${hostname} 5.4.0-74-generic #83-Ubuntu SMP ${new Date().toDateString()} x86_64 x86_64 x86_64 GNU/Linux (${
          userAgent.split(" ")[0]
        })`;
      }

      case "hostname": {
        return hostname;
      }

      case "id": {
        return `uid=1000(${username}) gid=1000(${username}) groups=1000(${username}),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),120(lpadmin),131(lxd),132(sambashare)`;
      }

      case "ps": {
        // Show actual running processes (browser tabs simulation)
        const processes = [
          `  PID TTY          TIME CMD`,
          ` 1234 pts/0    00:00:01 bash`,
          ` 5678 pts/0    00:00:00 termozet`,
          ` ${Math.floor(Math.random() * 9000 + 1000)} pts/0    00:00:00 ${
            navigator.userAgent.includes("Chrome") ? "chrome" : "firefox"
          }`,
          ` ${Math.floor(Math.random() * 9000 + 1000)} pts/0    00:00:00 node`,
          ` 9012 pts/0    00:00:00 ps`,
        ];
        return processes.join("\n");
      }

      case "df -h": {
        // Simulate filesystem usage with realistic values
        const rootSize = Math.floor(Math.random() * 50 + 20);
        const rootUsed = Math.floor(Math.random() * 20 + 8);
        const rootAvail = Math.floor(Math.random() * 30 + 10);
        const rootPercent = Math.floor(Math.random() * 80 + 20);
        const homeSize = Math.floor(Math.random() * 100 + 50);
        const homeUsed = Math.floor(Math.random() * 50 + 25);
        const homeAvail = Math.floor(Math.random() * 50 + 23);
        const homePercent = Math.floor(Math.random() * 60 + 40);
        const tmpSize = Math.floor(Math.random() * 8 + 2);

        return `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                        FILESYSTEM USAGE                       ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üíæ Disk Space Overview:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Filesystem   ‚îÇ Size ‚îÇ Used ‚îÇ Avail ‚îÇ Use% ‚îÇ   Mounted on    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ /dev/sda1      ‚îÇ ${rootSize.toString().padStart(3, " ")}G ‚îÇ ${rootUsed
          .toString()
          .padStart(3, " ")}G ‚îÇ ${rootAvail
          .toString()
          .padStart(4, " ")}G ‚îÇ ${rootPercent
          .toString()
          .padStart(3, " ")}% ‚îÇ /               ‚îÇ
‚îÇ tmpfs          ‚îÇ ${tmpSize.toString().padStart(3, " ")}G ‚îÇ   0G ‚îÇ ${tmpSize
          .toString()
          .padStart(4, " ")}G ‚îÇ   0% ‚îÇ /dev/shm        ‚îÇ
‚îÇ /dev/sda2      ‚îÇ ${homeSize.toString().padStart(3, " ")}G ‚îÇ ${homeUsed
          .toString()
          .padStart(3, " ")}G ‚îÇ ${homeAvail
          .toString()
          .padStart(4, " ")}G ‚îÇ ${homePercent
          .toString()
          .padStart(3, " ")}% ‚îÇ /home           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üìä Storage Statistics:
‚îú‚îÄ Total Storage: ${rootSize + homeSize}GB
‚îú‚îÄ Used Space: ${rootUsed + homeUsed}GB (${Math.floor(
          ((rootUsed + homeUsed) / (rootSize + homeSize)) * 100
        )}%)
‚îú‚îÄ Free Space: ${rootAvail + homeAvail}GB
‚îî‚îÄ Largest Mount: /home (${homeSize}GB)`;
      }

      case "free -h": {
        // Get actual memory info if available
        const memory =
          navigator.deviceMemory || Math.floor(Math.random() * 16 + 4);
        const used = Math.floor(memory * 0.3);
        const free = Math.floor(memory * 0.5);
        const available = Math.floor(memory * 0.7);
        const cache = Math.floor(memory * 0.2);
        const swap = 2;

        const usedPercent = Math.floor((used / memory) * 100);
        const freePercent = Math.floor((free / memory) * 100);
        const cachePercent = Math.floor((cache / memory) * 100);

        // Create visual memory usage bar
        const barLength = 40;
        const usedBars = Math.floor((usedPercent / 100) * barLength);
        const cacheBars = Math.floor((cachePercent / 100) * barLength);
        const freeBars = barLength - usedBars - cacheBars;

        const memoryBar =
          "‚ñà".repeat(usedBars) + "‚ñì".repeat(cacheBars) + "‚ñë".repeat(freeBars);

        // Create perfectly aligned table with exact character positioning
        // Each column must be exactly the width shown in the header
        const formatCol = (value, width) => {
          const str = `${value}.0 GB`;
          return str.padStart(width, " ");
        };

        return `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                         MEMORY USAGE                          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìä Memory Statistics:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Type     ‚îÇ  Total   ‚îÇ   Used   ‚îÇ   Free   ‚îÇ Shared   ‚îÇ  Cache   ‚îÇ Available  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Memory      ‚îÇ${formatCol(memory, 10)}‚îÇ${formatCol(used, 10)}‚îÇ${formatCol(
          free,
          10
        )}‚îÇ  156 MB  ‚îÇ${formatCol(cache, 10)}‚îÇ${formatCol(available, 12)}‚îÇ
‚îÇ Swap        ‚îÇ${formatCol(swap, 10)}‚îÇ   0.0 GB ‚îÇ${formatCol(
          swap,
          10
        )}‚îÇ    0 MB  ‚îÇ   0.0 GB ‚îÇ${formatCol(swap, 12)}‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üéØ Memory Usage Visualization:
[${memoryBar}] ${usedPercent}%

Legend: ‚ñà Used (${usedPercent}%) ‚ñì Cache (${cachePercent}%) ‚ñë Free (${freePercent}%)

üí° Memory Breakdown:
‚îú‚îÄ Total RAM: ${memory}.0 GB (${(memory * 1024).toFixed(0)} MB)
‚îú‚îÄ Used by Apps: ${used}.0 GB (${usedPercent.toString().padStart(2, " ")}%)
‚îú‚îÄ Cache/Buffers: ${cache}.0 GB (${cachePercent.toString().padStart(2, " ")}%)
‚îú‚îÄ Free Memory: ${free}.0 GB (${freePercent.toString().padStart(2, " ")}%)
‚îî‚îÄ Available for Apps: ${available}.0 GB`;
      }

      case "history":
        // This will be handled by the calling component since it needs commandHistory
        return null;

      case "cat /etc/os-release":
        return `NAME="Ubuntu"
VERSION="20.04.6 LTS (Focal Fossa)"
ID=ubuntu
ID_LIKE=debian
PRETTY_NAME="Ubuntu 20.04.6 LTS"
VERSION_ID="20.04"
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
VERSION_CODENAME=focal
UBUNTU_CODENAME=focal`;

      case "lscpu": {
        // Get actual CPU info if available
        const cores = navigator.hardwareConcurrency || 8;

        return `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                       CPU INFORMATION                         ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üîß CPU Architecture Details:
‚îú‚îÄ Architecture: x86_64
‚îú‚îÄ CPU op-mode(s): 32-bit, 64-bit
‚îú‚îÄ Byte Order: Little Endian
‚îú‚îÄ Address sizes: 39 bits physical, 48 bits virtual
‚îî‚îÄ CPU(s): ${cores}

‚ö° Core & Thread Information:
‚îú‚îÄ On-line CPU(s) list: 0-${cores - 1}
‚îú‚îÄ Thread(s) per core: 2
‚îú‚îÄ Core(s) per socket: ${cores / 2}
‚îú‚îÄ Socket(s): 1
‚îî‚îÄ NUMA node(s): 1

üè≠ Processor Details:
‚îú‚îÄ Vendor ID: GenuineIntel
‚îú‚îÄ CPU family: 6
‚îú‚îÄ Model: 142
‚îú‚îÄ Model name: Intel(R) Core(TM) i7-8550U CPU @ 1.80GHz
‚îú‚îÄ Stepping: 10
‚îú‚îÄ CPU MHz: ${Math.floor(Math.random() * 2000 + 1800)}.000
‚îú‚îÄ CPU max MHz: 4000.0000
‚îî‚îÄ CPU min MHz: 400.0000

üéØ Performance Summary:
‚îú‚îÄ Total Logical Cores: ${cores}
‚îú‚îÄ Current Clock Speed: ~${Math.floor(Math.random() * 2000 + 1800)} MHz
‚îî‚îÄ Max Boost Speed: 4.0 GHz`;
      }

      case "neofetch": {
        // Enhanced neofetch with real system info
        const browserName = navigator.userAgent.includes("Chrome")
          ? "Google Chrome"
          : navigator.userAgent.includes("Firefox")
          ? "Mozilla Firefox"
          : navigator.userAgent.includes("Safari")
          ? "Safari"
          : "Unknown Browser";
        const osInfo = navigator.platform;
        const screenRes = `${screen.width}x${screen.height}`;
        const colorDepth = screen.colorDepth;
        const deviceMemoryGB = navigator.deviceMemory || "Unknown";
        const connectionType = navigator.connection?.effectiveType || "Unknown";

        return `           .-/+oossssoo+/-.               ${username}@${hostname}
        ':+ssssssssssssssss+:'            -----------
      -+ssssssssssssssssssss+-        OS: Ubuntu 20.04.6 LTS x86_64
    -+sssssssssssssssssssssss+-       Host: Termozet Portfolio Terminal
  '+sssssssssssssssssssssssss+'       Kernel: 5.4.0-74-generic
 '+sssssssssssssssssssssssssss+'      Uptime: ${Math.floor(
   performance.now() / 3600000
 )
   .toString()
   .padStart(2, " ")} hours, ${Math.floor((performance.now() % 3600000) / 60000)
          .toString()
          .padStart(2, " ")} mins
+sssssssssssssssssssssssssssss+       Packages: 1847 (dpkg), 93 (snap)
+sssssssssssssssssssssssssssss+       Shell: bash 5.0.17
+sssssssssssssssssssssssssssss+       Resolution: ${screenRes}
+sssssssssssssssssssssssssssss+       DE: GNOME 3.36.8
 '+sssssssssssssssssssssssssss+'      WM: Mutter
  '+sssssssssssssssssssssssss+'       WM Theme: Adwaita
   '+sssssssssssssssssssssss+'        Theme: Yaru [GTK2/3]
     '+sssssssssssssssssss+'          Icons: Yaru [GTK2/3]
       '+sssssssssssssss+'            Terminal: termozet
         '+ssssssssss+'               Browser: ${browserName}
           '+ssssss+'                 Platform: ${osInfo}
             '+ss+'                   Memory: ${deviceMemoryGB}GB RAM
                                      Color Depth: ${colorDepth}-bit
                                      Connection: ${connectionType}`;
      }

      case "fortune": {
        const fortunes = [
          "The best way to predict the future is to invent it. - Alan Kay",
          "Code is like humor. When you have to explain it, it's bad. - Cory House",
          "Programs must be written for people to read, and only incidentally for machines to execute. - Harold Abelson",
          "The most important property of a program is whether it accomplishes the intention of its user. - C.A.R. Hoare",
          "Debugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it. - Brian Kernighan",
          "Any fool can write code that a computer can understand. Good programmers write code that humans can understand. - Martin Fowler",
          "First, solve the problem. Then, write the code. - John Johnson",
          "Experience is the name everyone gives to their mistakes. - Oscar Wilde",
          "In order to be irreplaceable, one must always be different. - Coco Chanel",
          "Java is to JavaScript what car is to Carpet. - Chris Heilmann",
          "Talk is cheap. Show me the code. - Linus Torvalds",
          "The computer was born to solve problems that did not exist before. - Bill Gates",
          "Software is a great combination between artistry and engineering. - Bill Gates",
          "Simplicity is the ultimate sophistication. - Leonardo da Vinci",
          "The only way to go fast, is to go well. - Robert C. Martin",
        ];
        return fortunes[Math.floor(Math.random() * fortunes.length)];
      }

      case "curl wttr.in": {
        try {
          // Try to fetch real weather data from wttr.in
          const response = await fetch("https://wttr.in/?format=j1");
          if (response.ok) {
            const weatherData = await response.json();
            const current = weatherData.current_condition[0];
            const location = weatherData.nearest_area[0];

            const temp = current.temp_C;
            const feelsLike = current.FeelsLikeC;
            const condition = current.weatherDesc[0].value;
            const humidity = current.humidity;
            const windSpeed = current.windspeedKmph;
            const windDirection = current.winddir16Point;

            // Simple weather icon based on condition
            let icon = [
              "     .-.     ",
              "    (   ).   ",
              "   (___(__)  ",
              "             ",
              "             ",
            ];

            if (
              condition.toLowerCase().includes("sunny") ||
              condition.toLowerCase().includes("clear")
            ) {
              icon = [
                "    \\   /    ",
                "     .-.     ",
                "  ‚Äï (   ) ‚Äï  ",
                "     '-'     ",
                "    /   \\    ",
              ];
            } else if (condition.toLowerCase().includes("cloud")) {
              icon = [
                "             ",
                "     .--.    ",
                "  .-(    ).  ",
                " (___.__)__) ",
                "             ",
              ];
            } else if (condition.toLowerCase().includes("rain")) {
              icon = [
                "     .-.     ",
                "    (   ).   ",
                "   (___(__)  ",
                "    ' ' ' '  ",
                "   ' ' ' '   ",
              ];
            }

            // Format weather table with perfect alignment using helper function
            const formatWeatherRow = (label, value, unit = "", extra = "") => {
              const labelCol = label.padEnd(12, " "); // Fixed 12-char label column

              // Handle different row types for perfect alignment
              if (label === "Wind") {
                // Wind: "value unit extra" format (e.g., "7 km/h SW")
                const windDisplay = `${value} ${unit} ${extra}`.padEnd(27, " ");
                return `‚îÇ  ${labelCol} ${windDisplay}    ‚îÇ`;
              } else if (label === "Condition") {
                // Condition: just the condition text, truncated if needed
                const conditionDisplay =
                  extra.length > 27
                    ? (extra.substring(0, 24) + "...").padEnd(27, " ")
                    : extra.padEnd(27, " ");
                return `‚îÇ  ${labelCol} ${conditionDisplay}    ‚îÇ`;
              } else {
                // Temperature, Feels like, Humidity: "value unit" format
                const valueDisplay = `${value}${unit}`.padEnd(27, " ");
                return `‚îÇ  ${labelCol} ${valueDisplay}    ‚îÇ`;
              }
            };

            return `Weather report: ${location.areaName[0].value}, ${
              location.country[0].value
            }

                    ${condition}
${icon[0]}
${icon[1]}      ${temp}¬∞C
${icon[2]}
${icon[3]}      
${icon[4]}

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Current conditions                          ‚îÇ
‚îÇ                                              ‚îÇ
${formatWeatherRow("Temperature", temp, "¬∞C")}
${formatWeatherRow("Feels like", feelsLike, "¬∞C")}
${formatWeatherRow("Humidity", humidity, "%")}
${formatWeatherRow("Wind", windSpeed, "km/h", windDirection)}
${formatWeatherRow(
  "Condition",
  "",
  "",
  condition.length > 15 ? condition.substring(0, 12) + "..." : condition
)}
‚îÇ                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Follow @wttr_in for weather updates.`;
          }
        } catch (error) {
          console.log("Weather API unavailable, using mock data");
        }

        // Fallback to mock data with proper formatting
        const temp = Math.floor(Math.random() * 30 + 10);
        const conditions = [
          "Clear",
          "Cloudy",
          "Sunny",
          "Partly Cloudy",
          "Rainy",
          "Overcast",
        ];
        const condition =
          conditions[Math.floor(Math.random() * conditions.length)];
        const humidity = Math.floor(Math.random() * 40 + 40);
        const windSpeed = Math.floor(Math.random() * 20 + 5);
        const windDirection = ["N", "NE", "E", "SE", "S", "SW", "W", "NW"][
          Math.floor(Math.random() * 8)
        ];

        // Classic terminal weather icons - simple and clean
        const weatherIcons = {
          Clear: [
            "    \\   /    ",
            "     .-.     ",
            "  ‚Äï (   ) ‚Äï  ",
            "     '-'     ",
            "    /   \\    ",
          ],
          Sunny: [
            "   \\  |  /   ",
            " .-.  |  .-. ",
            "(   '---'   )",
            " '-.,. ,.-' ",
            "   /  |  \\   ",
          ],
          Cloudy: [
            "             ",
            "     .--.    ",
            "  .-(    ).  ",
            " (___.__)__) ",
            "             ",
          ],
          "Partly Cloudy": [
            "   \\  /      ",
            ' _ /"".-.    ',
            "   \\_(   ).  ",
            "   /(___(__).",
            "             ",
          ],
          Rainy: [
            "     .-.     ",
            "    (   ).   ",
            "   (___(__)  ",
            "    ' ' ' '  ",
            "   ' ' ' '   ",
          ],
          Overcast: [
            "             ",
            "   .--.      ",
            ".-(    ).    ",
            "(___.__)___) ",
            "             ",
          ],
        };

        const icon = weatherIcons[condition] || weatherIcons["Clear"];
        const feelsLike = temp + Math.floor(Math.random() * 6 - 3);

        // Format weather table with perfect alignment using helper function (same as real data)
        const formatWeatherRow = (label, value, unit = "", extra = "") => {
          const labelCol = label.padEnd(12, " "); // Fixed 12-char label column

          // Handle different row types for perfect alignment
          if (label === "Wind") {
            // Wind: "value unit extra" format (e.g., "7 km/h SW")
            const windDisplay = `${value} ${unit} ${extra}`.padEnd(27, " ");
            return `‚îÇ  ${labelCol} ${windDisplay}    ‚îÇ`;
          } else if (label === "Condition") {
            // Condition: just the condition text, truncated if needed
            const conditionDisplay =
              extra.length > 27
                ? (extra.substring(0, 24) + "...").padEnd(27, " ")
                : extra.padEnd(27, " ");
            return `‚îÇ  ${labelCol} ${conditionDisplay}    ‚îÇ`;
          } else {
            // Temperature, Feels like, Humidity: "value unit" format
            const valueDisplay = `${value}${unit}`.padEnd(27, " ");
            return `‚îÇ  ${labelCol} ${valueDisplay}    ‚îÇ`;
          }
        };

        return `Weather report: Current Location

                    ${condition}
${icon[0]}
${icon[1]}      ${temp}¬∞C
${icon[2]}
${icon[3]}      
${icon[4]}

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Current conditions                          ‚îÇ
‚îÇ                                              ‚îÇ
${formatWeatherRow("Temperature", temp, "¬∞C")}
${formatWeatherRow("Feels like", feelsLike, "¬∞C")}
${formatWeatherRow("Humidity", humidity, "%")}
${formatWeatherRow("Wind", windSpeed, "km/h", windDirection)}
${formatWeatherRow(
  "Condition",
  "",
  "",
  condition.length > 15 ? condition.substring(0, 12) + "..." : condition
)}
‚îÇ                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Follow @wttr_in for weather updates.`;
      }

      case "cal": {
        const now = new Date();
        const year = now.getFullYear();
        const month = now.getMonth();
        const monthNames = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ];

        // Get first day of month and number of days
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const today = now.getDate();

        let calendar = `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n`;
        calendar += `‚ïë                    ${monthNames[month]} ${year}                    ‚ïë\n`;
        calendar += `‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n\n`;
        calendar += "‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n";
        calendar += "‚îÇ Su ‚îÇ Mo ‚îÇ Tu ‚îÇ We ‚îÇ Th ‚îÇ Fr ‚îÇ Sa ‚îÇ\n";
        calendar += "‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n";

        let dayStr = "‚îÇ";

        // Add empty spaces for days before month starts
        for (let i = 0; i < firstDay; i++) {
          dayStr += "    ‚îÇ";
        }

        // Add days of month
        for (let day = 1; day <= daysInMonth; day++) {
          if (day === today) {
            // Highlight today with asterisk
            dayStr += ` ${day.toString().padStart(2, " ")}*‚îÇ`;
          } else {
            dayStr += ` ${day.toString().padStart(2, " ")} ‚îÇ`;
          }

          if ((firstDay + day) % 7 === 0) {
            dayStr += "\n";
            if (day < daysInMonth) {
              dayStr += "‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ";
            }
          }
        }

        // Fill remaining cells in last row
        const remainingCells = 7 - ((firstDay + daysInMonth) % 7);
        if (remainingCells < 7) {
          for (let i = 0; i < remainingCells; i++) {
            dayStr += "    ‚îÇ";
          }
          dayStr += "\n";
        }

        dayStr += "‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n";
        dayStr += `\nüìÖ Today: ${monthNames[month]} ${today}, ${year} (marked with *)`;
        dayStr += `\n‚è∞ Current time: ${now.toLocaleTimeString()}`;

        return calendar + dayStr;
      }

      case "w":
      case "who": {
        const uptime = Math.floor(performance.now() / 1000);
        const uptimeHours = Math.floor(uptime / 3600);
        const uptimeMins = Math.floor((uptime % 3600) / 60);

        return `‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                       ACTIVE USER SESSIONS                    ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

‚è∞ System Time: ${new Date().toLocaleTimeString()} | Uptime: ${uptimeHours}h ${uptimeMins}m
üìä Load Average: ${(Math.random() * 2).toFixed(2)}, ${(
          Math.random() * 1.5
        ).toFixed(2)}, ${(Math.random() * 1).toFixed(2)}

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  USER  ‚îÇ TTY  ‚îÇ     FROM      ‚îÇ LOGIN@  ‚îÇ IDLE ‚îÇ JCPU ‚îÇ PCPU ‚îÇ    WHAT     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ${username.padEnd(6, " ")} ‚îÇ pts/0‚îÇ localhost     ‚îÇ ${new Date()
          .toLocaleTimeString()
          .substring(0, 5)}   ‚îÇ 0.00s‚îÇ 0.24s‚îÇ 0.03s‚îÇ termozet    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

üë§ Total Users: 1 active session
üñ•Ô∏è  Terminal: Enhanced Termozet Portfolio`;
      }

      case "finger":
        return `Login: ${username}           Name: ${username}
Directory: /home/${username}        Shell: /bin/bash
On since ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()} (pts/0) from localhost
   ${Math.floor(Math.random() * 60)} seconds idle
Mail: echoinbyte@gmail.com
Plan: Building LoomingFace, ETC, GameOverse and innovative web solutions!`;

      case "tree":
        return `.
‚îú‚îÄ‚îÄ Documents/
‚îÇ   ‚îú‚îÄ‚îÄ portfolio/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ termozet/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ loomingface/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ deploy.sh
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ backup.sh
‚îÇ   ‚îú‚îÄ‚îÄ notes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ideas.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ todo.md
‚îÇ   ‚îî‚îÄ‚îÄ resume/
‚îÇ       ‚îî‚îÄ‚îÄ resume.pdf
‚îú‚îÄ‚îÄ Downloads/
‚îú‚îÄ‚îÄ Pictures/
‚îÇ   ‚îú‚îÄ‚îÄ screenshots/
‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îú‚îÄ‚îÄ Videos/
‚îÇ   ‚îî‚îÄ‚îÄ recordings/
‚îî‚îÄ‚îÄ .bashrc

15 directories, 8 files`;

      case "env":
        return `USER=${username}
HOME=/home/${username}
SHELL=/bin/bash
TERM=xterm-256color
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/home/${username}
LANG=en_US.UTF-8
DISPLAY=:0
BROWSER=${navigator.userAgent.includes("Chrome") ? "google-chrome" : "firefox"}
EDITOR=vim
EMAIL=echoinbyte@gmail.com
GITHUB_USERNAME=echoinbyte
NODE_ENV=development`;

      case "lsusb": {
        return `Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub
Bus 001 Device 002: ID 8087:0024 Intel Corp. Integrated Rate Matching Hub
Bus 001 Device 003: ID 046d:c52b Logitech, Inc. Unifying Receiver
Bus 001 Device 004: ID 0bda:0129 Realtek Semiconductor Corp. RTS5129 Card Reader Controller
Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub
Bus 002 Device 002: ID 0781:5581 SanDisk Corp. Ultra`;
      }

      case "lspci":
        return `00:00.0 Host bridge: Intel Corporation 8th Gen Core Processor Host Bridge/DRAM Registers (rev 07)
00:02.0 VGA compatible controller: Intel Corporation UHD Graphics 620 (rev 07)
00:14.0 USB controller: Intel Corporation Sunrise Point-LP USB 3.0 xHCI Controller (rev 21)
00:16.0 Communication controller: Intel Corporation Sunrise Point-LP CSME HECI #1 (rev 21)
00:1c.0 PCI bridge: Intel Corporation Sunrise Point-LP PCI Express Root Port #1 (rev f1)
00:1f.0 ISA bridge: Intel Corporation Sunrise Point-LP LPC Controller (rev 21)
00:1f.3 Audio device: Intel Corporation Sunrise Point-LP HD Audio (rev 21)
00:1f.4 SMBus: Intel Corporation Sunrise Point-LP SMBus (rev 21)`;

      default:
        return null;
    }
  } catch (error) {
    console.error(`Error executing command ${command}:`, error);
    return `Error executing command: ${command}`;
  }
};

// List of all built-in commands
export const builtInCommands = [
  "clear",
  "whoami",
  "date",
  "pwd",
  "uptime",
  "uname",
  "uname -a",
  "hostname",
  "id",
  "echo",
  "ps",
  "df -h",
  "free -h",
  "history",
  "cat /etc/os-release",
  "lscpu",
  "lsusb",
  "lspci",
  "env",
  "which bash",
  "fortune",
  "curl wttr.in",
  "neofetch",
  "tree",
  "cal",
  "finger",
  "w",
  "who",
  "figlet",
];
